(this["webpackJsonpdialog-react-app"]=this["webpackJsonpdialog-react-app"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var s={};t.r(s),t.d(s,"MessageReaded",(function(){return y})),t.d(s,"MessageSended",(function(){return N}));var c=t(0),n=t(1),i=t.n(n),r=t(8),d=t.n(r),u=t(9),o=t.n(u),m=t(3),l=t.n(m),j=t(4),g=(t(16),function(){return Object(c.jsxs)("div",{className:"user-info",children:[Object(c.jsx)("div",{className:"name",children:"Ilezus Dev"}),Object(c.jsxs)("div",{className:"status",children:[Object(c.jsx)("span",{className:"circle"}),"\u0412 \u0441\u0435\u0442\u0438"]})]})}),v=Object(n.createContext)(),p=t(5),h=(t(17),function(){var e=i.a.useContext(v),a=e.theme,t=e.toggleTheme;return Object(c.jsx)("div",{className:"theme","data-theme":"light"===a?"dark":"light",onClick:function(e){var a=e.currentTarget.dataset.theme;t(a)},children:"light"===a?Object(c.jsx)(p.a,{size:20,className:"dark"}):Object(c.jsx)(p.b,{className:"yellow",size:20})})}),b=(t(18),function(){return Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)(g,{}),Object(c.jsx)(h,{})]})}),f=t(2),O=t(6),x=t.n(O),y=['<path \n          d="M773.495 279.073l-61.528-61.528-276.876 276.876 61.528 61.528 276.876-276.876zM958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344l246.112 246.112 61.528-61.528-246.112-246.112-61.528 61.528z"\n      />',"0 0 1024 1024"],N=['<path \n          d="M958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344v0z"\n      />',"0 0 1024 1024"],M=function(e){var a=e.size,t=void 0===a?20:a,n=e.name,i=e.className,r=void 0===i?"":i,d=Array.isArray(t)?t:[t,t],u=Object(j.a)(d,2),o=u[0],m=u[1],l=Object(j.a)(s[n],2),g=l[0],v=l[1];return Object(c.jsx)("svg",{className:x()("icon",r),width:o,height:m,dangerouslySetInnerHTML:{__html:g},viewBox:v})},w=(t(19),function(e){var a=e.isReverse,t=e.isRemovable,s=e.messages,n=e.avatar,i=e.onRemove,r=function(e){var a=e.currentTarget.dataset.id;i(Number(a))};return Object(c.jsxs)("div",{className:x()("item",{reverse:a,removable:t}),children:[Object(c.jsx)("img",{src:n,className:"avatar",alt:"Avatar"}),Object(c.jsx)("div",{className:"list",children:s.map((function(e){return Object(c.jsxs)("div",{className:"list-item",children:[Object(c.jsx)("div",{className:"text",children:e.text}),Object(c.jsx)("div",{className:"time",children:l()(e.date).format("HH:mm")}),Object(c.jsx)(M,{size:15,className:"message-status",name:"sended"===e.status?"MessageSended":"MessageReaded"}),Object(c.jsx)(p.c,{"data-id":e.id,size:18,className:"remove-message",onClick:r})]},e.id)}))})]})}),S=t(10),T=t.n(S);t(20);l.a.extend(T.a);var k=function(e){var a=e.date;return Object(c.jsx)("div",{className:"title",children:l()(a).calendar(void 0,{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f]",lastWeek:"DD MMMM",sameElse:"DD MMMM YYYY"})})};function z(e,a){switch(a.type){case"remove-message":return Object(f.a)(Object(f.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==a.payload}))});case"add-message":return Object(f.a)(Object(f.a)({},e),{},{messages:e.messages.concat(a.payload)});case"update-status":return Object(f.a)(Object(f.a)({},e),{},{messages:e.messages.map((function(e){return e.id===a.payload.id?Object(f.a)(Object(f.a)({},e),{},{status:a.payload.status}):e}))});default:throw new Error("Unknown action type")}}var R=[{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u041f\u0440\u0438\u0432\u0435\u0442",id:0,date:"2020-10-11T10:09:04.712Z",is:"her"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?",id:1,date:"2020-10-11T10:19:04.712Z",is:"her"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u042f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u0435\u0445\u0430\u043b \u0441 \u041c\u0430\u0440\u0441\u0430",id:2,date:"2020-10-11T10:24:04.712Z",is:"her"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0412\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e, \u0442\u044b \u043a\u0430\u043a?",id:3,date:"2020-10-11T11:09:04.712Z",status:"sended",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u0410\u0430\u0430, \u0434\u0430, \u044f \u0441\u043b\u044b\u0448\u0430\u043b",id:4,date:"2020-10-11T12:09:04.712Z",status:"sended",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041a\u0440\u0443\u0442\u043e",id:5,date:"2020-10-11T13:01:04.712Z",status:"readed",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041f\u043e\u043b\u0435\u0442 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439?",id:6,date:"2020-10-11T14:09:07.712Z",status:"readed",is:"my"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u0414\u0430, \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e. \u0422\u043e\u043b\u044c\u043a\u043e \u043d\u0438\u043a\u043e\u043c\u0443 \u043d\u0435 \u0433\u043e\u0432\u043e\u0440\u0438)",id:7,date:"2020-10-11T15:09:04.712Z",is:"her"}],D=(t(21),function(e){var a=e.newMessage,t=i.a.useRef(null),s=i.a.useReducer(z,{messages:R}),r=Object(j.a)(s,2),d=r[0],u=r[1];i.a.useEffect((function(){a&&(u({type:"add-message",payload:a}),setTimeout((function(){u({type:"update-status",payload:{id:a.id,status:"readed"}})}),2e3))}),[a]),i.a.useEffect((function(){t&&t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[d.messages.length]);var o=function(e){u({type:"remove-message",payload:e})},m=function(e){var a=[];return e.forEach((function(t,s){if(0===s||e[s-1]){var c=l()((0===s?t:e[s-1]).date).diff(t.date,"day");(0===s||c)&&a.push({type:"title",id:"item-title-".concat(t.id),date:t.date})}if(0===s||t.is!==e[s-1].is)a.push({type:"message",id:"item-message-".concat(t.id),avatar:t.avatar,isReverse:"my"===t.is,isRemovable:"my"===t.is,messages:[{text:t.message,status:t.status,id:t.id,date:t.date}]});else{var n=a.length-1;a[n]=Object(f.a)(Object(f.a)({},a[n]),{},{messages:a[n].messages.concat({text:t.message,status:t.status,id:t.id,date:t.date})})}})),a}(d.messages);return Object(c.jsx)("div",{className:"dialog",children:Object(c.jsx)("div",{ref:t,className:"overflow",children:m.map((function(e){return"message"===e.type?Object(n.createElement)(w,Object(f.a)(Object(f.a)({},e),{},{key:e.id,onRemove:o})):Object(c.jsx)(k,{date:e.date},e.id)}))})})}),E=(t(22),function(e){var a=e.onAddMessage,t=Object(n.useState)(""),s=Object(j.a)(t,2),i=s[0],r=s[1];return Object(c.jsxs)("form",{className:"sender",onSubmit:function(e){e.preventDefault(),a({id:Date.now(),avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:i,date:(new Date).toISOString(),is:"my",status:"sended"}),r("")},children:[Object(c.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:i,onChange:function(e){return r(e.target.value)},required:!0}),Object(c.jsx)("button",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})});var Z=function(){var e=i.a.useState(null),a=Object(j.a)(e,2),t=a[0],s=a[1],n=i.a.useState(localStorage.getItem("application-theme")||"dark"),r=Object(j.a)(n,2),d=r[0],u=r[1];return i.a.useEffect((function(){!function(e){localStorage.setItem("application-theme",e),"dark"===e?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.add("light"),document.body.classList.remove("dark"))}(d)}),[d]),Object(c.jsx)(v.Provider,{value:{theme:d,toggleTheme:u},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(b,{}),Object(c.jsx)(D,{newMessage:t}),Object(c.jsx)(E,{onAddMessage:s})]})})};t(23),t(24);o.a.load({google:{families:["Open Sans:300,400,700"]}}),l.a.locale("ru"),d.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(Z,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.a6af7b7f.chunk.js.map